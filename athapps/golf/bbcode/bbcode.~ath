import timer Z(1ms);BIRTH I WITH SCRY(VOID);BIRTH L WITH LENGTH(I);BIRTH P WITH 0;BIRTH O WITH"";BIRTH S WITH[];RITE G(x){BEQUEATH SUBSTRING(I,x,x+1);}RITE F(s,c){BIRTH u WITH SUBSTRING(I,s,L);BIRTH p WITH SPLIT(u,c);SHOULD LENGTH(p)>1{BEQUEATH s+LENGTH(p[0]);}BEQUEATH -1;}RITE T(x){BIRTH r WITH{v:DEAD};SHOULD G(x)!="["{BEQUEATH r;}BIRTH c WITH F(x,"]");SHOULD c==-1{BEQUEATH r;}BIRTH w WITH SUBSTRING(I,x+1,c);SHOULD LENGTH(w)==0{BEQUEATH r;}BIRTH k WITH DEAD;BIRTH n WITH 0;SHOULD SUBSTRING(w,0,1)=="/"{k=ALIVE;n=1;}BIRTH e WITH SUBSTRING(w,n,LENGTH(w));BIRTH p WITH SPLIT(e,"=");BIRTH m WITH LOWERCASE(p[0]);BIRTH a WITH VOID;SHOULD LENGTH(p)>1{a=SUBSTRING(e,LENGTH(p[0])+1,LENGTH(e));}r=SET(r,"v",ALIVE);r=SET(r,"n",m);r=SET(r,"c",k);r=SET(r,"a",a);r=SET(r,"e",c+1);BEQUEATH r;}RITE C(s,n){SHOULD n=="code"{RITE Q(p,d){BIRTH o WITH F(p,"[");SHOULD o==-1{BEQUEATH -1;}BIRTH t WITH T(o);SHOULD t["v"]==DEAD{BEQUEATH Q(o+1,d);}BIRTH m WITH t["n"];BIRTH e WITH d;SHOULD m=="code"{SHOULD t["c"]{e=d- 1;SHOULD e==0{BEQUEATH o;}}LEST{e=d+1;}}BEQUEATH Q(t["e"],e);}BEQUEATH Q(s,1);}BIRTH p WITH s;BIRTH u WITH SUBSTRING(I,p,L);BIRTH l WITH LOWERCASE(u);BIRTH k WITH"[/"+n+"]";BIRTH z WITH SPLIT(l,k);SHOULD LENGTH(z)>1{BEQUEATH p+LENGTH(z[0]);}BEQUEATH -1;}RITE B(s,n){BIRTH p WITH s;BIRTH d WITH 1;RITE A(p,d){SHOULD d==0{BEQUEATH ALIVE;}SHOULD p>=L{BEQUEATH DEAD;}BIRTH o WITH F(p,"[");SHOULD o==-1{BEQUEATH DEAD;}BIRTH t WITH T(o);SHOULD t["v"]==DEAD{BEQUEATH A(o+1,d);}BIRTH m WITH t["n"];SHOULD(m=="code"OR m=="img")AND t["c"]==DEAD{BIRTH x WITH C(t["e"],m);SHOULD x!=-1{BIRTH y WITH T(x);BEQUEATH A(y["e"],d);}}SHOULD m==n{SHOULD t["c"]{d=d- 1;}LEST{d=d+1;}}BEQUEATH A(t["e"],d);}BEQUEATH A(s,d);}RITE K(n){BIRTH k WITH["b","i","u","s","code","url","img","quote","color","size"];BIRTH x WITH 0;RITE J(x){SHOULD x>=LENGTH(k){BEQUEATH DEAD;}SHOULD k[x]==n{BEQUEATH ALIVE;}BEQUEATH J(x+1);}BEQUEATH J(0);}RITE X(){BIRTH b WITH F(P,"[");SHOULD b==-1{O=O+SUBSTRING(I,P,L);P=L;BEQUEATH VOID;}O=O+SUBSTRING(I,P,b);P=b;BIRTH t WITH T(P);SHOULD t["v"]==DEAD{O=O+"[";P=P+1;BEQUEATH VOID;}BIRTH n WITH t["n"];SHOULD K(n)==DEAD{O=O+SUBSTRING(I,P,t["e"] );P=t["e"];BEQUEATH VOID;}SHOULD t["c"]==DEAD{SHOULD n=="code"{BIRTH c WITH C(t["e"],"code");SHOULD c!=-1{BIRTH x WITH SUBSTRING(I,t["e"],c);O=O+"<code>"+x+"</code>";BIRTH y WITH T(c);P=y["e"];BEQUEATH VOID;}}SHOULD n=="img"{BIRTH c WITH C(t["e"],"img");SHOULD c!=-1{BIRTH x WITH SUBSTRING(I,t["e"],c);O=O+"<img src=\""+x+"\">";BIRTH y WITH T(c);P=y["e"];BEQUEATH VOID;}}SHOULD n=="url"AND t["a"]==VOID{BIRTH c WITH C(t["e"],"url");SHOULD c!=-1{BIRTH x WITH SUBSTRING(I,t["e"],c);O=O+"<a href=\""+x+"\">"+x+"</a>";BIRTH y WITH T(c);P=y["e"];BEQUEATH VOID;}}BIRTH h WITH B(t["e"],n);SHOULD h{S=APPEND(S,n);SHOULD n=="b"{O=O+"<strong>";}SHOULD n=="i"{O=O+"<em>";}SHOULD n=="u"{O=O+"<u>";}SHOULD n=="s"{O=O+"<s>";}SHOULD n=="quote"{O=O+"<blockquote>";SHOULD t["a"]!=VOID{O=O+"<cite>"+t["a"]+"</cite>";}}SHOULD n=="color"{O=O+"<span style=\"color:"+t["a"]+"\">";}SHOULD n=="size"{O=O+"<span style=\"font-size:"+t["a"]+"\">";}SHOULD n=="url"{O=O+"<a href=\""+t["a"]+"\">";}P=t["e"];BEQUEATH VOID;}}SHOULD t["c"]{SHOULD LENGTH(S)>0{BIRTH q WITH LAST(S);SHOULD q==n{S=SLICE(S,0,LENGTH(S)- 1);SHOULD n=="b"{O=O+"</strong>";}SHOULD n=="i"{O=O+"</em>";}SHOULD n=="u"{O=O+"</u>";}SHOULD n=="s"{O=O+"</s>";}SHOULD n=="quote"{O=O+"</blockquote>";}SHOULD n=="color"OR n=="size"{O=O+"</span>";}SHOULD n=="url"{O=O+"</a>";}P=t["e"];BEQUEATH VOID;}}}O=O+SUBSTRING(I,P,t["e"]);P=t["e"];}RITE Y(){SHOULD P<L{X();import timer N(1ms);~ATH(N){}EXECUTE(Y());}LEST{UTTER(O);}}~ATH(Z){}EXECUTE(Y());